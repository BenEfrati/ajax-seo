Options -Indexes +FollowSymLinks -MultiViews

ServerSignature Off
php_value error_log error_log.txt
php_value short_open_tag On
php_flag magic_quotes_gpc Off
php_flag register_globals Off
php_value output_handler ob_gzhandler

AddDefaultCharset utf-8
<ifModule mod_deflate.c>
    <FilesMatch "\.(php|css|js|json|txt)$">
        SetOutputFilter DEFLATE
    </FilesMatch>
</ifModule>
<ifModule mod_expires.c>
    ExpiresActive On
    ExpiresDefault "access plus 1 month"
    ExpiresByType text/css "access plus 6 months"
    ExpiresByType text/plain "access plus 1 hour"
    ExpiresByType text/cache-manifest "access plus 0 seconds"
    ExpiresByType application/x-httpd-php "access plus 0 second"
    ExpiresByType application/x-javascript "access plus 6 months"
    ExpiresByType application/javascript "access plus 6 months"
    ExpiresByType application/json "access plus 0 second"
</ifModule>
<ifModule mod_headers.c>
    <filesMatch "\.(css|js|json|txt)$">
        Header set Cache-Control "max-age=31536000, public"
    </filesMatch>
    <filesMatch "\.(php)$">
        Header set Cache-Control "max-age=600, private, must-revalidate"
    </filesMatch>
    FileETag None
    Header unset ETag
    Header unset Last-Modified
    Header append Vary User-Agent
</ifModule>
<IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
        BrowserMatch MSIE ie
        Header set X-UA-Compatible "IE=Edge,chrome=1" env=ie
    </IfModule>
</IfModule>
<IfModule mod_gzip.c>
    mod_gzip_on Yes
    mod_gzip_can_negotiate Yes
    mod_gzip_static_suffix .gz
    AddEncoding gzip .gz
    mod_gzip_update_static No
    mod_gzip_keep_workfiles No
    mod_gzip_minimum_file_size 512
    mod_gzip_maximum_file_size 1048576
    mod_gzip_maximum_inmem_size 60000
    mod_gzip_maximum_inmem_size 60000
    mod_gzip_min_http 1000
    mod_gzip_handle_methods GET POST
    mod_gzip_dechunk No
    mod_gzip_item_exclude reqheader \"User-agent: Mozilla/4.0[678]\"\
    mod_gzip_item_include file \.(php|css|js|txt)$
    mod_gzip_item_include handler ^cgi-script$
    mod_gzip_item_include handler proxy-server
    mod_gzip_item_include mime ^text/css$
    mod_gzip_item_include mime ^text/.*
    mod_gzip_item_include mime ^application/json$
    mod_gzip_item_include mime ^application/javascript$
    mod_gzip_item_include mime ^application/x-httpd-php$
    mod_gzip_item_include mime ^application/x-javascript$
    mod_gzip_item_include mime ^httpd/unix-directory$
    mod_gzip_item_exclude rspheader Content-Type:image/*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule>
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Ajax SEO /?_escaped_fragment_=friendly-url redirect to /friendly-url
    RewriteCond %{QUERY_STRING} ^_escaped_fragment_=(.*)$
    RewriteRule .*$ %{REQUEST_URI}%1? [R=301,L]
    
    # Remove multiple trailing slashes after domain
    RewriteCond %{THE_REQUEST} ^[A-Z]+\s//+(.*)\sHTTP/[0-9.]+$
    RewriteRule . http://%{HTTP_HOST}/%1 [R=301,L]
    
    # Remove multiple trailing slashes in the URL
    RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
    RewriteRule . %1/%2 [R=301,L]
    
    # Removes trailing slash from URL end
    RewriteCond %{REQUEST_URI} ^(.+)/$
    RewriteRule ^.+/$ %1 [R=301,L]
    
    # Rewrite uppercase letter URL to lowercase
    RewriteCond %{REQUEST_URI} .+
    RewriteRule ^[^A-Z]*[A-Z] ${lc:%0} [R=301,L]
    
#   # Solution for shared hostings that does not support RewriteMap
#   # Rewrite uppercase letter URL to lowercase
#   # Skip this entire section if no uppercase letters in requested URL
#   RewriteRule ![A-Z] - [S=28]
#   # Else rewrite one of each uppercase letter to lowercase
#   RewriteRule ^([^A]*)A(.*)$ $1a$2
#   RewriteRule ^([^B]*)B(.*)$ $1b$2
#   RewriteRule ^([^C]*)C(.*)$ $1c$2
#   RewriteRule ^([^D]*)D(.*)$ $1d$2
#   RewriteRule ^([^E]*)E(.*)$ $1e$2
#   RewriteRule ^([^F]*)F(.*)$ $1f$2
#   RewriteRule ^([^G]*)G(.*)$ $1g$2
#   RewriteRule ^([^H]*)H(.*)$ $1h$2
#   RewriteRule ^([^I]*)I(.*)$ $1i$2
#   RewriteRule ^([^J]*)J(.*)$ $1j$2
#   RewriteRule ^([^K]*)K(.*)$ $1k$2
#   RewriteRule ^([^L]*)L(.*)$ $1l$2
#   RewriteRule ^([^M]*)M(.*)$ $1m$2
#   RewriteRule ^([^N]*)N(.*)$ $1n$2
#   RewriteRule ^([^O]*)O(.*)$ $1o$2
#   RewriteRule ^([^P]*)P(.*)$ $1p$2
#   RewriteRule ^([^Q]*)Q(.*)$ $1q$2
#   RewriteRule ^([^R]*)R(.*)$ $1r$2
#   RewriteRule ^([^S]*)S(.*)$ $1s$2
#   RewriteRule ^([^T]*)T(.*)$ $1t$2
#   RewriteRule ^([^U]*)U(.*)$ $1u$2
#   RewriteRule ^([^V]*)V(.*)$ $1v$2
#   RewriteRule ^([^W]*)W(.*)$ $1w$2
#   RewriteRule ^([^X]*)X(.*)$ $1x$2
#   RewriteRule ^([^Y]*)Y(.*)$ $1y$2
#   RewriteRule ^([^Z]*)Z(.*)$ $1z$2
#   # If more uppercase letters remain, re-invoke .htaccess and start over
#   RewriteRule [A-Z] - [N]
#   # Else do a 301 redirect to the all-lowercase URL
#   RewriteRule (.*) /$1 [R=301,L]

    # Remove .php extension
    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^/]+/)*[^.]+\.php(\?[^\ ]*)?\ HTTP/ [NC]
    RewriteRule ^(([^/]+/)*[^.]+)\.php$ http://%{HTTP_HOST}/%1$1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^.]*)$ index.php?url=$1 [L,QSA]
    RewriteRule ^([^/\./-/+]*)\.json$ data.php?url=$1 [L,QSA]
</IfModule>