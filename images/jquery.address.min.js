(function(a){a.address=(function(){var d=function(ak){a(a.address).trigger(a.extend(a.Event(ak),(function(){var ao={},an=a.address.parameterNames();for(var am=0,al=an.length;am<al;am++){ao[an[am]]=a.address.parameter(an[am])}return{value:a.address.value(),path:a.address.path(),pathNames:a.address.pathNames(),parameterNames:an,parameters:ao,queryString:a.address.queryString()}}).call(a.address)))},j=function(ak){return Array.prototype.slice.call(ak)},J=function(am,al,ak){a().on.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},U=function(al,ak){a().off.apply(a(a.address),Array.prototype.slice.call(arguments));return a.address},O=function(){return(ad.pushState&&E.state!==K)},I=function(){return("/"+Z.pathname.replace(new RegExp(E.state),"")+Z.search+(V()?"#"+V():"")).replace(Q,"/")},V=function(){var ak=Z.href.indexOf("#");return ak!=-1?D(Z.href.substr(ak+1),ae):""},z=function(){return O()?I():V()},b=function(){try{return top.document!==K&&top.document.title!==K?top:window}catch(ak){return window}},k=function(){return"javascript"},ai=function(ak){ak=ak.toString();return(E.strict&&ak.substr(0,1)!="/"?"/":"")+ak},D=function(ak,al){if(E.crawlable&&al){return(ak!==""?"!":"")+ak}return ak.replace(/^\!/,"")},T=function(ak,al){return parseInt(ak.css(al),10)},ac=function(){if(!s){var al=z(),ak=X!=al;if(ak){if(h&&p<7){Z.reload()}else{if(h&&!P&&E.history){m(F,50)}X=al;aa(ae)}}}},aa=function(ak){d(H);d(ak?g:ah);m(w,10)},w=function(){if(E.tracker!=="null"&&E.tracker!==G){var ak=a.isFunction(E.tracker)?E.tracker:R[E.tracker],al=(Z.pathname+Z.search+(a.address&&!O()?a.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(a.isFunction(ak)){ak(al)}else{if(a.isFunction(R.urchinTracker)){R.urchinTracker(al)}else{if(R.pageTracker!==K&&a.isFunction(R.pageTracker._trackPageview)){R.pageTracker._trackPageview(al)}else{if(R._gaq!==K&&a.isFunction(R._gaq.push)){R._gaq.push(["_trackPageview",decodeURI(al)])}}}}}},F=function(){var ak=k()+":"+ae+";document.open();document.writeln('<html><head><title>"+ag.title.replace(/\'/g,"\\'")+"</title><script>var "+y+' = "'+z()+(ag.domain!=Z.hostname?'";document.domain="'+ag.domain:"")+"\";<\/script></head></html>');document.close();";if(p<7){e.src=ak}else{e.contentWindow.location.replace(ak)}},af=function(){if(i&&c!=-1){var ak,am,al=i.substr(c+1).split("&");for(ak=0;ak<al.length;ak++){am=al[ak].split("=");if(/^(autoUpdate|crawlable|history|strict|wrap)$/.test(am[0])){E[am[0]]=(isNaN(am[1])?/^(true|yes)$/i.test(am[1]):(parseInt(am[1],10)!==0))}if(/^(state|tracker)$/.test(am[0])){E[am[0]]=am[1]}}i=G}X=z()},S=function(){if(!Y){Y=C;af();var am=function(){v.call(this);q.call(this)},al=a("body").ajaxComplete(am);am();if(E.wrap){var an=a("body > *").wrapAll('<div style="padding:'+(T(al,"marginTop")+T(al,"paddingTop"))+"px "+(T(al,"marginRight")+T(al,"paddingRight"))+"px "+(T(al,"marginBottom")+T(al,"paddingBottom"))+"px "+(T(al,"marginLeft")+T(al,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+y+'" style="height:100%;overflow:auto;position:relative;'+(r&&!window.statusbar.visible?"resize:both;":"")+'" />');a("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});if(r){a('<style type="text/css" />').appendTo("head").text("#"+y+"::-webkit-resizer { background-color: #fff; }")}}if(h&&!P){var ak=ag.getElementsByTagName("frameset")[0];e=ag.createElement((ak?"":"i")+"frame");e.src=k()+":"+ae;if(ak){ak.insertAdjacentElement("beforeEnd",e);ak[ak.cols?"cols":"rows"]+=",0";e.noResize=C;e.frameBorder=e.frameSpacing=0}else{e.style.display="none";e.style.width=e.style.height=0;e.tabIndex=-1;ag.body.insertAdjacentElement("afterBegin",e)}m(function(){a(e).on("load",function(){var ao=e.contentWindow;X=ao[y]!==K?ao[y]:"";if(X!=z()){aa(ae);Z.hash=D(X,C)}});if(e.contentWindow[y]===K){F()}},50)}m(function(){d("init");aa(ae)},1);if(!O()){if(P){if(R.addEventListener){R.addEventListener(W,ac,ae)}else{if(R.attachEvent){R.attachEvent("on"+W,ac)}}}else{t(ac,50)}}if("state" in window.history){a(window).trigger("popstate")}}},v=function(){var an,aq=a("a"),ao=aq.size(),al=1,ak=-1,ap='[rel*="address:"]',am=function(){if(++ak!=ao){an=a(aq.get(ak));if(an.is(ap)){an.address(ap)}m(am,al)}};m(am,al)},o=function(){if(X!=z()){X=z();aa(ae)}},n=function(){if(R.removeEventListener){R.removeEventListener(W,ac,ae)}else{if(R.detachEvent){R.detachEvent("on"+W,ac)}}},q=function(){if(E.crawlable){var al=Z.pathname.replace(/\/$/,""),ak="_escaped_fragment_";if(a("body").html().indexOf(ak)!=-1){a('a[href]:not([href^=http]), a[href*="'+document.domain+'"]').each(function(){var am=a(this).attr("href").replace(/^http:/,"").replace(new RegExp(al+"/?$"),"");if(am===""||am.indexOf(ak)!=-1){a(this).attr("href","#"+encodeURI(decodeURIComponent(am.replace(new RegExp("/(.*)\\?"+ak+"=(.*)$"),"!$2"))))}})}}},K,G=null,y="jQueryAddress",ab="string",W="hashchange",l="init",H="change",g="internalChange",ah="externalChange",C=true,ae=false,E={autoUpdate:C,crawlable:ae,history:C,strict:C,wrap:ae},B=a.browser,p=parseFloat(B.version),h=!a.support.opacity,r=B.webkit||B.safari,R=b(),ag=R.document,ad=R.history,Z=R.location,t=setInterval,m=setTimeout,Q=/\/{2,9}/g,aj=navigator.userAgent,P="on"+W in R,e,M,i=a("script:last").attr("src"),c=i?i.indexOf("?"):-1,L=ag.title,s=ae,Y=ae,N=C,x=ae,A={},X=z();if(h){p=parseFloat(aj.substr(aj.indexOf("MSIE")+4));if(ag.documentMode&&ag.documentMode!=p){p=ag.documentMode!=8?7:8}var u=ag.onpropertychange;ag.onpropertychange=function(){if(u){u.call(ag)}if(ag.title!=L&&ag.title.indexOf("#"+z())!=-1){ag.title=L}}}if(ad.navigationMode){ad.navigationMode="compatible"}if(document.readyState=="complete"){var f=setInterval(function(){if(a.address){S();clearInterval(f)}},50)}else{af();a(S)}a(window).on("popstate",o).on("unload",n);return{on:function(al,am,ak){return J.apply(this,j(arguments))},off:function(al,ak){return U.apply(this,j(arguments))},init:function(al,ak){return J.apply(this,[l].concat(j(arguments)))},change:function(al,ak){return J.apply(this,[H].concat(j(arguments)))},internalChange:function(al,ak){return J.apply(this,[g].concat(j(arguments)))},externalChange:function(al,ak){return J.apply(this,[ah].concat(j(arguments)))},baseURL:function(){var ak=Z.href;if(ak.indexOf("#")!=-1){ak=ak.substr(0,ak.indexOf("#"))}if(/\/$/.test(ak)){ak=ak.substr(0,ak.length-1)}return ak},autoUpdate:function(ak){if(ak!==K){E.autoUpdate=ak;return this}return E.autoUpdate},crawlable:function(ak){if(ak!==K){E.crawlable=ak;return this}return E.crawlable},history:function(ak){if(ak!==K){E.history=ak;return this}return E.history},state:function(ak){if(ak!==K){E.state=ak;var al=I();if(E.state!==K){if(ad.pushState){if(al.substr(0,3)=="/#/"){Z.replace(E.state.replace(/^\/$/,"")+al.substr(2))}}else{if(al!="/"&&al.replace(/^\/#/,"")!=V()){m(function(){Z.replace(E.state.replace(/^\/$/,"")+"/#"+al)},1)}}}return this}return E.state},strict:function(ak){if(ak!==K){E.strict=ak;return this}return E.strict},tracker:function(ak){if(ak!==K){E.tracker=ak;return this}return E.tracker},wrap:function(ak){if(ak!==K){E.wrap=ak;return this}return E.wrap},update:function(){x=C;this.value(X);x=ae;return this},title:function(ak){if(ak!==K){m(function(){L=ag.title=ak;if(N&&e&&e.contentWindow&&e.contentWindow.document){e.contentWindow.document.title=ak;N=ae}},50);return this}return ag.title},value:function(ak){if(ak!==K){ak=ai(ak);if(ak=="/"){ak=""}if(X==ak&&!x){return}X=ak;if(E.autoUpdate||x){aa(C);if(O()){ad[E.history?"pushState":"replaceState"]({},"",E.state.replace(/\/$/,"")+(X===""?"/":X))}else{s=C;if(r){if(E.history){Z.hash="#"+D(X,C)}else{Z.replace("#"+D(X,C))}}else{if(X!=z()){if(E.history){Z.hash="#"+D(X,C)}else{Z.replace("#"+D(X,C))}}}if((h&&!P)&&E.history){m(F,50)}if(r){m(function(){s=ae},1)}else{s=ae}}}return this}return ai(X)},path:function(al){if(al!==K){var ak=this.queryString(),am=this.hash();this.value(al+(ak?"?"+ak:"")+(am?"#"+am:""));return this}return ai(X).split("#")[0].split("?")[0]},pathNames:function(){var al=this.path(),ak=al.replace(Q,"/").split("/");if(al.substr(0,1)=="/"||al.length===0){ak.splice(0,1)}if(al.substr(al.length-1,1)=="/"){ak.splice(ak.length-1,1)}return ak},queryString:function(al){if(al!==K){var am=this.hash();this.value(this.path()+(al?"?"+al:"")+(am?"#"+am:""));return this}var ak=X.split("?");return ak.slice(1,ak.length).join("?").split("#")[0]},parameter:function(al,au,an){var ar,ap;if(au!==K){var at=this.parameterNames();ap=[];au=au===K||au===G?"":au.toString();for(ar=0;ar<at.length;ar++){var ao=at[ar],av=this.parameter(ao);if(typeof av==ab){av=[av]}if(ao==al){av=(au===G||au==="")?[]:(an?av.concat([au]):[au])}for(var aq=0;aq<av.length;aq++){ap.push(ao+"="+av[aq])}}if(a.inArray(al,at)==-1&&au!==G&&au!==""){ap.push(al+"="+au)}this.queryString(ap.join("&"));return this}au=this.queryString();if(au){var ak=[];ap=au.split("&");for(ar=0;ar<ap.length;ar++){var am=ap[ar].split("=");if(am[0]==al){ak.push(am.slice(1).join("="))}}if(ak.length!==0){return ak.length!=1?ak:ak[0]}}},parameterNames:function(){var ak=this.queryString(),an=[];if(ak&&ak.indexOf("=")!=-1){var ao=ak.split("&");for(var am=0;am<ao.length;am++){var al=ao[am].split("=")[0];if(a.inArray(al,an)==-1){an.push(al)}}}return an},hash:function(al){if(al!==K){this.value(X.split("#")[0]+(al?"#"+al:""));return this}var ak=X.split("#");return ak.slice(1,ak.length).join("#")}}})();a.fn.address=function(b){var d;if(typeof b=="string"){d=b;b=undefined}if(!a(this).attr("address")){var c=function(g){if(g.shiftKey||g.ctrlKey||g.metaKey||g.which==2){return true}if(a(this).is("a")){g.preventDefault();var f=b?b.call(this):/address:/.test(a(this).attr("rel"))?a(this).attr("rel").split("address:")[1].split(" ")[0]:a.address.state()!==undefined&&!/^\/?$/.test(a.address.state())?a(this).attr("href").replace(new RegExp("^(.*"+a.address.state()+"|\\.)"),""):a(this).attr("href").replace(/^(#\!?|\.)/,"");a.address.value(f)}};a(d?d:this).on("click",c).on("submit",function(h){if(a(this).is("form")){h.preventDefault();var g=a(this).attr("action"),f=b?b.call(this):(g.indexOf("?")!=-1?g.replace(/&$/,""):g+"?")+a(this).serialize();a.address.value(f)}}).attr("address",true)}return this}})(jQuery);